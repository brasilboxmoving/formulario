<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invent√°rio de Mudan√ßa - Box Brasil Moving</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0056A7 0%, #003366 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(to right, #0056A7, #FF6D00);
            color: white;
            padding: 25px;
            text-align: center;
        }
        
        h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 16px;
            opacity: 0.9;
        }
        
        .content {
            padding: 25px;
        }
        
        .form-section {
            margin-bottom: 30px;
        }
        
        h2 {
            color: #0056A7;
            border-bottom: 2px solid #FF6D00;
            padding-bottom: 8px;
            margin-bottom: 20px;
            font-size: 22px;
        }
        
        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .form-group {
            flex: 1;
            min-width: 200px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #0056A7;
        }
        
        input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        input:focus {
            border-color: #0056A7;
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 86, 167, 0.2);
        }
        
        .btn {
            background: #FF6D00;
            color: white;
            border: none;
            padding: 14px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        
        .btn:hover {
            background: #E55C00;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 109, 0, 0.4);
        }
        
        .btn-success {
            background: #00A859;
        }
        
        .btn-success:hover {
            background: #008E4A;
        }
        
        .btn i {
            margin-right: 8px;
        }
        
        .alert {
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            display: none;
        }
        
        .alert-danger {
            background-color: #ffe6e6;
            border: 1px solid #ff9999;
            color: #cc0000;
        }
        
        .alert-success {
            background-color: #e6ffe6;
            border: 1px solid #99cc99;
            color: #006600;
        }
        
        .alert-info {
            background-color: #e6f7ff;
            border: 1px solid #99d6ff;
            color: #0066cc;
        }
        
        .items-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .items-table th {
            background-color: #0056A7;
            color: white;
            padding: 12px 15px;
            text-align: left;
        }
        
        .items-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #ddd;
        }
        
        .items-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .items-table tr:hover {
            background-color: #f0f7ff;
        }
        
        .delete-btn {
            background: #ff3333;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .delete-btn:hover {
            background: #cc0000;
        }
        
        .summary {
            background-color: #f0f7ff;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
        }
        
        .summary h3 {
            color: #0056A7;
            margin-bottom: 15px;
        }
        
        .actions {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .prohibited-list {
            background-color: #fff5f5;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
        }
        
        .prohibited-list h3 {
            color: #cc0000;
            margin-bottom: 15px;
        }
        
        .prohibited-list ul {
            padding-left: 20px;
        }
        
        .prohibited-list li {
            margin-bottom: 8px;
        }
        
        .highlight {
            background-color: #fffacd;
            padding: 2px 5px;
            border-radius: 3px;
        }
        
        @media (max-width: 768px) {
            .container {
                border-radius: 10px;
            }
            
            h1 {
                font-size: 24px;
            }
            
            .content {
                padding: 15px;
            }
            
            .form-row {
                flex-direction: column;
                gap: 10px;
            }
            
            .form-group {
                min-width: 100%;
            }
            
            .items-table {
                font-size: 14px;
            }
            
            .items-table th, .items-table td {
                padding: 8px 10px;
            }
            
            .actions {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                margin-right: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üì¶ Box Brasil Moving</h1>
            <p class="subtitle">Formul√°rio de Invent√°rio para Mudan√ßa Internacional</p>
        </header>
        
        <div class="content">
            <div class="alert alert-danger" id="prohibitedAlert">
                <strong>Aten√ß√£o!</strong> Este item √© proibido para envio em container de mudan√ßa.
            </div>
            
            <div class="alert alert-success" id="successAlert">
                <strong>Sucesso!</strong> Item adicionado ao invent√°rio.
            </div>
            
            <div class="alert alert-info" id="exportAlert">
                <strong>Conclu√≠do!</strong> Seu invent√°rio foi enviado para extremeconsultant@icloud.com e est√° pronto para download.
            </div>
            
            <div class="form-section">
                <h2>Adicionar Item √† Caixa</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="itemName">Nome do Item</label>
                        <input type="text" id="itemName" placeholder="Ex: TV 55', Sof√°, Livros...">
                    </div>
                    
                    <div class="form-group">
                        <label for="itemQuantity">Quantidade</label>
                        <input type="number" id="itemQuantity" min="1" value="1">
                    </div>
                    
                    <div class="form-group">
                        <label for="itemValue">Valor Total Aproximado (US$)</label>
                        <input type="number" id="itemValue" min="0" step="0.01" placeholder="0.00">
                    </div>
                </div>
                
                <!-- Corrigido: type="button" para evitar comportamento de submit e permitir controle via JS -->
                <button class="btn" id="addItemBtn" type="button">
                    <i>‚ûï</i> Adicionar Item
                </button>
            </div>
            
            <div class="form-section">
                <h2>Itens Adicionados</h2>
                <table class="items-table" id="itemsTable">
                    <thead>
                        <tr>
                            <th>Item</th>
                            <th>Quantidade</th>
                            <th>Valor Total (US$)</th>
                            <th>A√ß√µes</th>
                        </tr>
                    </thead>
                    <tbody id="itemsList">
                        <!-- Itens ser√£o adicionados aqui dinamicamente -->
                    </tbody>
                </table>
                
                <div class="summary" id="summarySection" style="display: none;">
                    <h3>Resumo do Invent√°rio</h3>
                    <p><strong>Total de Itens Diferentes:</strong> <span id="totalItems">0</span></p>
                    <p><strong>Quantidade Total de Itens:</strong> <span id="totalQuantity">0</span></p>
                    <p><strong>Valor Total Aproximado:</strong> US$ <span id="totalValue">0.00</span></p>
                    
                    <div class="actions">
                        <!-- Corrigido: type="button" -->
                        <button class="btn btn-success" id="exportBtn" type="button">
                            <i>üìß</i> Concluir e Enviar
                        </button>
                        <button class="btn" id="downloadBtn" type="button">
                            <i>üì•</i> Baixar Invent√°rio
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="prohibited-list">
                <h3>‚ö†Ô∏è Itens Proibidos para Envio</h3>
                <p>Por quest√µes de seguran√ßa e legisla√ß√£o aduaneira, os seguintes itens <span class="highlight">n√£o podem</span> ser enviados em container de mudan√ßa:</p>
                <ul>
                    <li>Produtos inflam√°veis (tintas, solventes, gasolina, √°lcool)</li>
                    <li>Armas de fogo e muni√ß√µes</li>
                    <li>Produtos qu√≠micos e t√≥xicos</li>
                    <li>Plantas, sementes e produtos agr√≠colas</li>
                    <li>Alimentos perec√≠veis</li>
                    <li>Animais vivos</li>
                    <li>Produtos piratas ou falsificados</li>
                    <li>Dinheiro em esp√©cie e joias de alto valor</li>
                    <li>Medicamentos controlados sem receita</li>
                    <li>Baterias de l√≠tio soltas</li>
                </ul>
                <p><strong>Dica:</strong> Consulte nossa equipe em caso de d√∫vidas sobre itens espec√≠ficos.</p>
            </div>
        </div>
    </div>

    <script>
        // Lista de itens proibidos (em min√∫sculas para compara√ß√£o)
        const prohibitedItems = [
            'gasolina', '√°lcool', 'alcool', 'tinta', 'solvente', 'produto qu√≠mico', 'produto toxico', 'produto t√≥xico',
            'planta', 'semente', 'animal vivo', 'arma', 'muni√ß√£o', 'municao', 'bateria de l√≠tio', 'bateria li',
            'dinheiro', 'joia', 'medicamento controlado', 'produto pirata', 'alimento perec√≠vel', 'inflam√°vel', 'inflamavel',
            'explosivo', 'corrosivo', 'radioativo'
        ];
        
        // Array para armazenar os itens
        let items = [];
        
        // Elementos DOM
        const itemNameInput = document.getElementById('itemName');
        const itemQuantityInput = document.getElementById('itemQuantity');
        const itemValueInput = document.getElementById('itemValue');
        const addItemBtn = document.getElementById('addItemBtn');
        const exportBtn = document.getElementById('exportBtn');
        const downloadBtn = document.getElementById('downloadBtn');
        const itemsList = document.getElementById('itemsList');
        const prohibitedAlert = document.getElementById('prohibitedAlert');
        const successAlert = document.getElementById('successAlert');
        const exportAlert = document.getElementById('exportAlert');
        const totalItemsSpan = document.getElementById('totalItems');
        const totalQuantitySpan = document.getElementById('totalQuantity');
        const totalValueSpan = document.getElementById('totalValue');
        const summarySection = document.getElementById('summarySection');
        
        // Fun√ß√£o para verificar se um item √© proibido
        function isItemProhibited(itemName) {
            const lowerCaseName = itemName.toLowerCase();
            return prohibitedItems.some(prohibited => lowerCaseName.includes(prohibited));
        }
        
        // Fun√ß√£o para adicionar item √† lista
        function addItem() {
            const name = itemNameInput.value.trim();
            const quantity = parseInt(itemQuantityInput.value, 10);
            const value = parseFloat(itemValueInput.value) || 0;
            
            // Valida√ß√µes b√°sicas
            if (!name) {
                alert('Por favor, insira o nome do item.');
                itemNameInput.focus();
                return;
            }
            
            if (isNaN(quantity) || quantity < 1) {
                alert('A quantidade deve ser pelo menos 1.');
                itemQuantityInput.focus();
                return;
            }
            
            // Verificar se o item √© proibido
            if (isItemProhibited(name)) {
                prohibitedAlert.style.display = 'block';
                successAlert.style.display = 'none';
                exportAlert.style.display = 'none';
                return;
            }
            
            // Adicionar item ao array
            const newItem = {
                id: Date.now() + Math.floor(Math.random() * 1000), // ID √∫nico
                name,
                quantity,
                value // J√° √© o valor total, n√£o precisa calcular
            };
            
            items.push(newItem);
            
            // Atualizar a tabela
            updateItemsTable();
            
            // Mostrar alerta de sucesso
            successAlert.style.display = 'block';
            prohibitedAlert.style.display = 'none';
            exportAlert.style.display = 'none';
            
            // Limpar formul√°rio
            itemNameInput.value = '';
            itemQuantityInput.value = '1';
            itemValueInput.value = '';
            itemNameInput.focus();
        }
        
        // Fun√ß√£o para remover item
        function removeItem(id) {
            items = items.filter(item => item.id !== id);
            updateItemsTable();
        }
        
        // Fun√ß√£o para atualizar a tabela de itens
        function updateItemsTable() {
            // Limpar a tabela
            itemsList.innerHTML = '';
            
            // Adicionar cada item √† tabela
            items.forEach(item => {
                const row = document.createElement('tr');
                
                const tdName = document.createElement('td');
                tdName.textContent = item.name;
                
                const tdQty = document.createElement('td');
                tdQty.textContent = item.quantity;
                
                const tdVal = document.createElement('td');
                tdVal.textContent = `US$ ${item.value.toFixed(2)}`;
                
                const tdAct = document.createElement('td');
                const delBtn = document.createElement('button');
                delBtn.type = 'button'; // importante para n√£o submeter forms acidentalmente
                delBtn.className = 'delete-btn';
                delBtn.textContent = 'Remover';
                delBtn.addEventListener('click', () => removeItem(item.id));
                
                tdAct.appendChild(delBtn);
                
                row.appendChild(tdName);
                row.appendChild(tdQty);
                row.appendChild(tdVal);
                row.appendChild(tdAct);
                
                itemsList.appendChild(row);
            });
            
            // Atualizar resumo
            updateSummary();
        }
        
        // Fun√ß√£o para atualizar o resumo
        function updateSummary() {
            const totalItems = items.length;
            const totalQuantity = items.reduce((sum, item) => sum + item.quantity, 0);
            const totalValue = items.reduce((sum, item) => sum + item.value, 0);
            
            totalItemsSpan.textContent = totalItems;
            totalQuantitySpan.textContent = totalQuantity;
            totalValueSpan.textContent = totalValue.toFixed(2);
            
            // Mostrar/ocultar se√ß√£o de resumo
            summarySection.style.display = items.length > 0 ? 'block' : 'none';
        }
        
        // Fun√ß√£o para exportar dados (gera CSV e faz download)
        function exportData() {
            if (items.length === 0) {
                alert('Adicione pelo menos um item antes de exportar.');
                return;
            }
            
            // Criar conte√∫do do CSV
            let csvContent = "Item,Quantidade,Valor Total (US$)\n";
            items.forEach(item => {
                // escapar v√≠rgulas no nome se necess√°rio
                const nameSafe = `"${String(item.name).replace(/"/g, '""')}"`;
                csvContent += `${nameSafe},${item.quantity},${item.value.toFixed(2)}\n`;
            });
            
            // Adicionar resumo
            const totalQuantity = items.reduce((sum, item) => sum + item.quantity, 0);
            const totalValue = items.reduce((sum, item) => sum + item.value, 0);
            
            csvContent += '\nRESUMO\n';
            csvContent += `Itens Diferentes,${items.length}\n`;
            csvContent += `Quantidade Total,${totalQuantity}\n`;
            csvContent += `Valor Total,${totalValue.toFixed(2)}\n`;
            csvContent += `Data,${new Date().toLocaleDateString('pt-BR')}\n`;
            csvContent += `Cliente,Box Brasil Moving\n`;
            
            // Criar blob e link para download
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            const filename = `inventario_mudanca_${new Date().toISOString().split('T')[0]}.csv`;
            const link = document.createElement('a');
            link.setAttribute('href', url);
            link.setAttribute('download', filename);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
            
            // Simular envio por email (apenas log - envio real precisa de backend)
            const email = 'extremeconsultant@icloud.com';
            const subject = 'Invent√°rio de Mudan√ßa - Box Brasil Moving';
            const body = `Segue em anexo o invent√°rio completo da mudan√ßa.\n\nTotal de itens: ${items.length}\nQuantidade total: ${totalQuantity}\nValor total: US$ ${totalValue.toFixed(2)}`;
            
            // Mostrar alerta de sucesso
            exportAlert.style.display = 'block';
            successAlert.style.display = 'none';
            prohibitedAlert.style.display = 'none';
            
            console.log(`Email simulado enviado para: ${email}`);
            console.log(`Assunto: ${subject}`);
            console.log(`Corpo: ${body}`);
            
            // Se quiser abrir o cliente de email (n√£o anexa o CSV, apenas preenche assunto/corpo):
            // window.location.href = `mailto:${email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
        }
        
        // Fun√ß√£o para baixar invent√°rio (reutiliza exportData)
        function downloadInventory() {
            exportData();
        }
        
        // Event Listeners
        addItemBtn.addEventListener('click', addItem);
        exportBtn.addEventListener('click', exportData);
        downloadBtn.addEventListener('click', downloadInventory);
        
        // Permitir adicionar item pressionando Enter no campo de nome, quantidade ou valor
        function handleEnterAdd(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                addItem();
            }
        }
        itemNameInput.addEventListener('keydown', handleEnterAdd);
        itemQuantityInput.addEventListener('keydown', handleEnterAdd);
        itemValueInput.addEventListener('keydown', handleEnterAdd);
        
        // Inicializar a tabela
        updateItemsTable();
    </script>
</body>
</html>